let pokemonRepository=function(){let e=[];function t(e){return fetch(e.detailsUrl,{method:"GET"}).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types}).catch(function(e){console.error(e)})}return{getAll:function(){return e},add:function(t){e.push(t)},addListItem:function(e){let t=document.querySelector(".pokemon-list"),o=document.createElement("li");o.classList.add("list-group-item"),t.appendChild(o);let n=document.createElement("button");n.innerText=e.name,n.classList.add("btn"),n.classList.add("btn-primary"),n.classList.add("btn-custom"),n.classList.add("pokemon-list--button"),n.setAttribute("type","button"),n.setAttribute("data-toggle","modal"),n.setAttribute("data-target","#info-modal"),o.appendChild(n),pokemonRepository.addClickEvent(n,e)},addClickEvent:function(e,t){e.addEventListener("click",()=>{pokemonRepository.showDetails(t)})},showDetails:function(e){t(e).then(function(){pokemonRepository.constructInfoModal(e)})},findByName:function(t){return e.filter(e=>e.name===t)},promptPokemon(){let e=document.querySelector(".prompt-pokemon"),t=e.value.toLowerCase();console.log(t);let o=document.querySelectorAll("#pokemon-list .btn");o.forEach(e=>{e.innerText.toLowerCase().includes(t)?(e.parentElement.classList.remove("hide"),pokemonRepository.highlight(e,t)):(e.parentElement.classList.add("hide"),pokemonRepository.removeHighlight(e))})},highlight(e,t){let o=e.innerText,n=o.indexOf(t),i="";if(-1!==n){0!==n&&(i=o.substring(0,n));let s=o.substring(n,n+t.length),l=o.substring(n+t.length,o.length),r=`${i}<span class="highlight">${s}</span>${l}`;e.innerHTML=r}},removeHighlight(e){let t=e.querySelector("span");t&&t.classList.remove("highlight")},loadList:function e(){return pokemonRepository.showLoadingMessage(),window.showL,fetch("https://pokeapi.co/api/v2/pokemon/?limit=150",{method:"GET"}).then(function(e){return e.json()}).then(function(e){pokemonRepository.hideLoadingMessage(),e.results.forEach(function(e){let t={name:e.name.charAt(0).toUpperCase()+e.name.substring(1),detailsUrl:e.url};pokemonRepository.add(t)})}).catch(function(e){pokemonRepository.hideLoadingMessage(),console.error(e)})},loadDetails:t,showLoadingMessage(){let e=document.querySelector(".loading");e.classList.remove("hide")},hideLoadingMessage(){let e=document.querySelector(".loading");e.classList.add("hide")},constructInfoModal(e){let t=document.querySelector("#info-modal");t.querySelector(".modal-title").innerText=e.name;let o=t.querySelector(".modal-body");o.innerHTML="";let n=document.createElement("img");n.classList.add("modal__pokemon-img"),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",`image of ${e.name}`);let i=document.createElement("li");i.appendChild(n);let s=document.createElement("ul");o.classList.add("modal__info");let l=document.createElement("li");l.innerText=`Height: ${e.height}`;let r=document.createElement("li");r.innerText="Types: ",e.types.forEach(e=>{(typeItem=document.createElement("li")).classList.add("pokemon-type"),typeItem.innerText=e.type.name.charAt(0).toUpperCase()+e.type.name.substring(1)+", ",r.appendChild(typeItem)}),r.lastChild.innerHTML=r.lastChild.innerHTML.slice(0,-2),s.appendChild(i),s.appendChild(l),s.appendChild(r),o.appendChild(s)}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})}),window.addEventListener("input",e=>{e.target.matches(".prompt-pokemon")&&(clearTimeout(window.promptTimeout),window.promptTimeout=setTimeout(pokemonRepository.promptPokemon,300))});